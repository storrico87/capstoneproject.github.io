YUI.add("feed-route",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Routes[this.name]=t,e.extend(t,e.FlickrRoute,{langBundles:this.details.langBundles,run:function(t,n){var r=this,i=this.appContext.getViewer(),s;return i&&i.signedIn?s=i.nsid:t.probableUser&&(s=t.probableUser),this.appContext.getModel("person-models",s).then(function(t){return e.Promise.all([this.appContext.getModel("person-preferences-models",s)]).then(function(n){var i=n[0],o=!1,u=r.appContext.flipper.isFlipped("enable-force-new-feed-ads-everyone");return t&&(o=!t.getValue("isPro")),u&&(o=!0),e.Promise.resolve({view:"feed-page-view",params:{nsid:s,forceAds:u,resetFeedFilter:YUI.Env.isServer,showAds:o,safeSearch:i.getValue("safeSearch")},title:r.intlMessage({intlName:"common.HOME"}),layout:"scrolling"})})}.bind(this))}}),e.mix(t.prototype,e.Localizable)},"@VERSION@",{requires:["flickr-route","flickr-promise","feed-page-view","person-preferences-models","activity-models","person-models"],langBundles:["common"]});
YUI.add("hermes-template-sohp-slideshow",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'class="attribution-icon-'+e.escapeExpression(e.lambda((s=t!=null?t["inspiration-image"]:t)!=null?s.attribution:s,t))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["global-nav-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="inspiration-bucket" itemscope itemtype="http://schema.org/ImageObject" data-scroll-section="sohp-inspiration">\n	<div class="background-overlay fluid-modal-overlay dark-overlay"></div>\n	<div class="next-inspiration">\n	</div>\n	<div class="attribution next-attribution">\n		<div class="attribution-icon"><i '+((s=n["if"].call(o,(s=t!=null?t["inspiration-image"]:t)!=null?s.attribution:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'></i></div>\n		<div class="photo-title" itemprop="name"><a href="'+a(f((s=t!=null?t["inspiration-image"]:t)!=null?s.userURL:s,t))+'" data-track="attribution">'+a(f((s=t!=null?t["inspiration-image"]:t)!=null?s.title:s,t))+'</a></div>\n		<div class="username" itemprop="author"><a href="'+a(f((s=t!=null?t["inspiration-image"]:t)!=null?s.userURL:s,t))+'" data-track="attribution">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{user:(s=t!=null?t["inspiration-image"]:t)!=null?s.userName:s,intlName:"common.BY_USER"},data:i}))+'</a></div>\n	</div>\n	<div class="current-inspiration fade-out paused-animation">\n		<div class="attribution fade-out paused-animation">\n			<div class="attribution-icon"><i '+((s=n["if"].call(o,(s=t!=null?t["inspiration-image"]:t)!=null?s.attribution:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'></i></div>\n			<div class="photo-title" itemprop="name"><a href="'+a(f((s=t!=null?t["inspiration-image"]:t)!=null?s.userURL:s,t))+'" data-track="attribution">'+a(f((s=t!=null?t["inspiration-image"]:t)!=null?s.title:s,t))+'</a></div>\n			<div class="username" itemprop="author"><a href="'+a(f((s=t!=null?t["inspiration-image"]:t)!=null?s.userURL:s,t))+'" data-track="attribution">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{user:(s=t!=null?t["inspiration-image"]:t)!=null?s.userName:s,intlName:"common.BY_USER"},data:i}))+'</a></div>\n		</div>\n	</div>\n	<div class="inspiration-content">\n		<a name="inspiration"></a>\n		<div class="copy">\n			<h1>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"sohp.SOHP_TITLE_INSPIRATION"},data:i}))+"</h1>\n			<h3>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"sohp.SOHP_BODY_INSPIRATION"},data:i}))+'</h3>\n			<a href="/signup" class="medium-ass butt large white" data-track="signup-main">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'</a>\n		</div>\n	</div>\n	<div class="slideshow-controls">\n		<a class="prev-arrow"><div class="arrow-icon"></div></a>\n		<a class="next-arrow"><div class="arrow-icon"></div></a>\n	</div>\n</div>\n\n'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["footer-full-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/sohp-slideshow",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("sohp-slideshow-photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{photoList:{defaultValue:[{}]}}})},"@VERSION@");
YUI.add("sohp-slideshow-view",function(e){var t=700,n;e.namespace("Views")[this.name]=e.Base.create("sohp-slideshow-view",e.FlickrView,[],{langBundles:this.details.langBundles,additionalViewClasses:function(){var e=[],t=this.getOS();return(t==="ios"||t==="android")&&e.push(t),e},shuffleArray:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:!0,additionalViewClasses:["semi-transparent"]},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,isSOHP:!0}},loadState:function(){var e=this;return this.usedInspirationImages=[],this.appContext.getModel("sohp-slideshow-photo-models",1).then(function(t){n=t.getValue("photoList"),e.inspirationImages=e.shuffleArray(n).concat(),e.inspirationImage=e.pickInspirationImage()})},buildHeadContainer:function(){var e="",t;t="https://farm4.staticflickr.com/3914/15118079089_489aa62638_b.jpg",e+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, initial-scale=1, maximum-scale=1"}),e+=this.templates("head-meta")({isName:!0,metaName:"apple-itunes-app",metaValue:"app-id=328407587"}),e+=this.templates("head-link")({rel:"canonical",href:"https://www.flickr.com"}),e+=this.templates("head-link")({rel:"alternative",media:"only screen and (max-width: 700px)",href:"https://m.flickr.com"}),e+='<meta property="title" content="'+this.intlMessage({intlName:"sohp.PAGE_TITLE"})+'"  data-dynamic="true"/>',e+='<meta property="description" content="'+this.intlMessage({intlName:"sohp.PAGE_DESCRIPTION"})+'"  data-dynamic="true"/>',e+='<meta property="og:title" content="'+this.intlMessage({intlName:"common.A_YAHOO_COMPANY"})+'"  data-dynamic="true"/>',e+='<meta property="og:type" content="website"  data-dynamic="true"/>',e+='<meta property="og:description" content="'+this.intlMessage({intlName:"common.FLICKR_IS_ALMOST_CERTAINLY"})+'"  data-dynamic="true"/>',e+='<meta property="og:image" content="'+t+'"  data-dynamic="true"/>',e+='<meta name="twitter:card" content="summary_large_image"  data-dynamic="true">',e+='<meta name="twitter:creator" content="@flickr"  data-dynamic="true">',e+='<meta name="twitter:title" content="'+this.intlMessage({intlName:"common.A_YAHOO_COMPANY"})+'"  data-dynamic="true">',e+='<meta name="twitter:description" content="'+this.intlMessage({intlName:"common.FLICKR_IS_ALMOST_CERTAINLY"})+'"  data-dynamic="true">',e+='<meta name="twitter:image:src" content="'+t+'"  data-dynamic="true">',this.set("headContainer",e),YUI.Env.isServer||this.updateHead()},buildContainer:function(){var e;return e={"inspiration-image":this.inspirationImage},this.setContainerWithTemplate("sohp-slideshow",e),this},getOS:function(){var t;return YUI.Env.isServer?t=e.BrowserSupport.getOSString(this.appContext.request.headers["user-agent"]):t=e.UA.os,String(t).toLowerCase()},activate:function(){var t=this.get("container");return this.startSlideshow(!0),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.handlePageResize.bind(this))),this.registerEventHandler(t.delegate("click",this.slideshowRefresh,".next-arrow",this)),this.registerEventHandler(e.one("body").on("key",this.slideshowRefresh.bind(this),"down:39")),this.registerEventHandler(t.one(".prev-arrow").on("click",this.slideshowPrev,this)),this.registerEventHandler(e.one("body").on("key",this.slideshowPrev.bind(this),"down:37")),t.addClass("peek-a-boo"),this.addView(this.inspirationImage),this.preloadTimeout=setTimeout(this.preloadImages.bind(this),500),this},slideshowPrev:function(e){this.usedInspirationImages.length>1?(this.inspirationImages.push(this.usedInspirationImages.pop()),this.inspirationImages.push(this.usedInspirationImages.pop())):(this.inspirationImages.push(this.usedInspirationImages.pop()),this.inspirationImages.push(this.inspirationImages.shift())),this.slideshowRefresh(e)},slideshowRefresh:function(e){e.halt(),this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.setNextAsCurrentTimeout&&clearTimeout(this.setNextAsCurrentTimeout),this.startSlideshow(!0)},startSlideshow:function(e){e?(this.slideshowTimeout=setTimeout(this.loadNewInspiration.bind(this),0),this.get("container").one(".next-inspiration").addClass("slide")):this.slideshowTimeout=setTimeout(this.loadNewInspiration.bind(this),3e3)},preloadImages:function(){this.preloadImage(n[0],0)},preloadImage:function(e,t){function s(){var e=t+1;t<n.length-1&&n[e]&&i.preloadImage(n[e],e)}var r=new Image,i=this;r.onerror=function(){s()},r.onload=function(){s()},r.src=e.url},addView:function(e){if(this.appContext.flipper.isFlipped("enable-sohp-view-counting"))return this.appContext.getViewCounter().queue(e.id)},loadNewInspiration:function(){var t=this.get("container"),n=t.one(".next-inspiration"),r=t.one(".current-inspiration"),i=t.one(".next-attribution"),s=r.one(".attribution");this.inspirationImage=this.pickInspirationImage();var o=this.inspirationImage.url,u=this.inspirationImage.photoUrl,a=this.intlMessage({intlName:"common.BY_USER",user:this.inspirationImage.userName}),f=this.inspirationImage.attribution,l=this.inspirationImage.title;r.addClass("fade-out"),s.addClass("fade-out"),r.removeClass("paused-animation"),s.removeClass("paused-animation"),n.setStyles({backgroundImage:"url("+o+")"}),i.one(".username a").set("text",a).setAttribute("href",u),i.one(".photo-title a").set("text",l).setAttribute("href",u),f?i.one(".attribution-icon i").set("className","attribution-icon-"+f):i.one(".attribution-icon i").set("className",""),this.setNextAsCurrentTimeout=setTimeout(function(){r.setStyles({backgroundImage:"url("+o+")"}),s.one(".username a").set("text",a).setAttribute("href",u),s.one(".photo-title a").set("text",l).setAttribute("href",u),f?s.one(".attribution-icon i").set("className","attribution-icon-"+f):s.one(".attribution-icon i").set("className",""),r.removeClass("fade-out"),s.removeClass("fade-out"),n.removeClass("slide")},500),this
.addView(this.inspirationImage),e.rapidTracker.beacon(this.name,"inspireme"),this.startSlideshow(!1)},pickInspirationImage:function(){var e=this.inspirationImages.length,t;return e===0&&(this.inspirationImages=n.concat(),this.usedInspirationImages=[]),t=this.inspirationImages.pop(),this.usedInspirationImages.push(t),t},handlePageResize:function(e){var t=this.get("container");t.hasClass("hack-the-height")&&t.removeClass("hack-the-height"),t.replaceClass("peek-a-boo","peek-a-boo-perm")},destructor:function(){clearTimeout(this.slideshowTimeout),clearTimeout(this.preloadTimeout),clearTimeout(this.setNextAsCurrentTimeout)}},{ATTRS:{spaceid:{value:792600582,readOnly:!0}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-sohp-slideshow","hermes-template-head-meta","hermes-template-head-link","global-nav-view","footer-full-view","url","browser-support","sohp-slideshow-photo-models"],langBundles:["common","sohp"]});
YUI.add("hermes-template-sohp",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f="function";return a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["global-nav-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="autoscroll-container" itemscope itemtype="http://schema.org/ImageObject" data-scroll-section="sohp-grid">\n	<div class="background-overlay fluid-modal-overlay dark-overlay"></div>\n	<div class="content">\n		<div class="copy">\n			<h1>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"sohp.SOHP_TITLE_INSPIRATION"},data:i}))+"</h1>\n			<h3>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"sohp.SOHP_BODY_INSPIRATION_MOD"},data:i}))+'</h3>\n			<a href="/signup" class="medium-ass butt large white" data-track="signup-main">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'</a>\n		</div>\n	</div>\n	<div class="autoscroll-bg" style="background-image: url(\''+a((s=(s=n.assetRoot||(t!=null?t.assetRoot:t))!=null?s:u,typeof s===f?s.call(o,{name:"assetRoot",hash:{},data:i}):s))+'/images/sohp/sohp-grid-resized.jpg\'); height: 110%;"></div>\n	<div class="autoscroll-bg" style="background-image: url(\''+a((s=(s=n.assetRoot||(t!=null?t.assetRoot:t))!=null?s:u,typeof s===f?s.call(o,{name:"assetRoot",hash:{},data:i}):s))+"/images/sohp/sohp-grid-resized.jpg'); height: 110%;\"></div>\n</div>\n\n"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["footer-full-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/sohp",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("sohp-view",function(e){var t=700,n=320,r=1060,i=50,s=2461/1920;e.namespace("Views")[this.name]=e.Base.create("sohp-view",e.FlickrView,[],{langBundles:this.details.langBundles,additionalViewClasses:function(){var e=[],t=this.getOS();return(t==="ios"||t==="android")&&e.push(t),e},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:!0,additionalViewClasses:["semi-transparent"]},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,isSOHP:!0}},buildHeadContainer:function(){var e="",t;t="https://farm4.staticflickr.com/3914/15118079089_489aa62638_b.jpg",e+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, initial-scale=1, maximum-scale=1"}),e+=this.templates("head-meta")({isName:!0,metaName:"apple-itunes-app",metaValue:"app-id=328407587"}),e+=this.templates("head-link")({rel:"canonical",href:"https://www.flickr.com"}),e+=this.templates("head-link")({rel:"alternative",media:"only screen and (max-width: 700px)",href:"https://m.flickr.com"}),e+='<meta property="title" content="'+this.intlMessage({intlName:"sohp.PAGE_TITLE"})+'"  data-dynamic="true"/>',e+='<meta property="description" content="'+this.intlMessage({intlName:"sohp.PAGE_DESCRIPTION"})+'"  data-dynamic="true"/>',e+='<meta property="og:title" content="'+this.intlMessage({intlName:"common.A_YAHOO_COMPANY"})+'"  data-dynamic="true"/>',e+='<meta property="og:type" content="website"  data-dynamic="true"/>',e+='<meta property="og:description" content="'+this.intlMessage({intlName:"common.FLICKR_IS_ALMOST_CERTAINLY"})+'"  data-dynamic="true"/>',e+='<meta property="og:image" content="'+t+'"  data-dynamic="true"/>',e+='<meta name="twitter:card" content="summary_large_image"  data-dynamic="true">',e+='<meta name="twitter:creator" content="@flickr"  data-dynamic="true">',e+='<meta name="twitter:title" content="'+this.intlMessage({intlName:"common.A_YAHOO_COMPANY"})+'"  data-dynamic="true">',e+='<meta name="twitter:description" content="'+this.intlMessage({intlName:"common.FLICKR_IS_ALMOST_CERTAINLY"})+'"  data-dynamic="true">',e+='<meta name="twitter:image:src" content="'+t+'"  data-dynamic="true">',this.set("headContainer",e),YUI.Env.isServer||this.updateHead()},buildContainer:function(){return this.setContainerWithTemplate("sohp"),this},getOS:function(){var t;return YUI.Env.isServer?t=e.BrowserSupport.getOSString(this.appContext.request.headers["user-agent"]):t=e.UA.os,String(t).toLowerCase()},activate:function(){var t=this.get("container");return this.setBackgroundHeight(),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.handlePageResize.bind(this))),t.addClass("peek-a-boo"),t.all(".autoscroll-bg").addClass("scrolling-grid"),this},setBackgroundHeight:function(){var e=this.appContext.viewportData.getWidth(),i=Math.max(n,e)-this.appContext.viewportData.scrollbarWidth,o=e>t?Math.max(r,e):2*i,u=this.get("container").all(".autoscroll-bg");u&&u.setStyle("height",o*s+2+"px")},handlePageResize:function(e){var t=this.get("container");t.hasClass("hack-the-height")&&t.removeClass("hack-the-height"),t.replaceClass("peek-a-boo","peek-a-boo-perm"),this.setBackgroundHeight(),t.all(".autoscroll-bg").removeClass("scrolling-grid"),this.scrollResetTimer&&clearTimeout(this.scrollResetTimer),this.scrollResetTimer=setTimeout(function(){t.all(".autoscroll-bg").addClass("scrolling-grid")},500)},destructor:function(){clearTimeout(this.scrollResetTimer)}},{ATTRS:{spaceid:{value:792600582,readOnly:!0}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-sohp","hermes-template-head-meta","hermes-template-head-link","global-nav-view","footer-full-view","url","browser-support"],langBundles:["common","sohp"]});
YUI.add("sohp-route",function(e){function n(e){n.superclass.constructor.call(this,e)}var t=!1;e.Routes[this.name]=n,e.extend(n,e.FlickrRoute,{langBundles:this.details.langBundles,run:function(n){return e.Promise.resolve({view:t?"sohp-slideshow-view":"sohp-view",title:this.intlMessage({intlName:"sohp.SOHP_TITLE_INSPIRATION"}),layout:"scrolling",darkLoader:!0})}}),e.mix(n.prototype,e.Localizable)},"@VERSION@",{requires:["flickr-route","flickr-promise","sohp-slideshow-view","sohp-view"],langBundles:["sohp"]});
YUI.add("home-route",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Routes[this.name]=t,e.extend(t,e.FlickrRoute,{run:function(e){var t=e.hasSessionCookie,n;return t?n=this.appContext.getRoute("feed-route").then(function(t){return t.run(e)}):n=this.appContext.getRoute("sohp-route").then(function(t){return t.run(e)}),n}})},"@VERSION@",{requires:["flickr-route","flickr-promise"],optional:["feed-route","sohp-route"]});
